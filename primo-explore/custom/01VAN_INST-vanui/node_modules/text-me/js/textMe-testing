//Add Text Me

app.controller('ActionContainerController', [function () {
  var vm = this;
}]);


app.component('prmActionContainer', {
  bindings: { parentCtrl: '<' },
  controller: 'ActionContainerController',
  template: '\n    <text-me-primo parent-ctrl="$ctrl.parentCtrl"></test-me-primo>\n'

});




app.constant('textMePrimoConfig', [{ "text": "Text Me", "linkBase": "https://www.library.vanderbilt.edu/forms/textme.php" }]);
app.controller('textMePrimoController', ['textMePrimoConfig', function (configParams) {
    
     //set the context
     var vm = this;
    
     //binds the function to the scope so it's requestable in the component.
     vm.getRecordID = getRecordID;
	 vm.getTitle = getTitle;
	 vm.getCall = getCall;
	 vm.getLibrary = getLibrary
     vm.linkText = getLinkText();
     vm.linkBase = getLinkBase();

    function getLinkText(){
       return configParams[0].text;
    }
    function getLinkBase(){
       return configParams[0].linkBase;
    }
     //define the function that retrieves the record ID
     function getRecordID() {
         return vm.parentCtrl.item.pnx.control.recordid[0];
     } 
	 function getLibrary() {
		 return vm.parentCtrl.item.delivery.bestlocation.mainLocation;
	 } 
	 function getTitle() {
		return vm.parentCtrl.item.pnx.display.title[0]; 
	 }
	 function getCall() {
		return vm.parentCtrl.item.delivery.bestlocation.callNumber;
	 }	  
}]);

 


app.component('textMePrimo', {
     bindings: {parentCtrl: '<'},
     controller: 'textMePrimoController',
     template: `<span class="md-subhead"><hr/><a href="{{ $ctrl.linkBase }}{{ $ctrl.getRecordID() }}" target="_blank">{{ $ctrl.linkText }}</a></span>`

 });

//Add SMS Text